---
import Page from '../../../components/Page.astro';
import QuestChatWrapper from '../svelte/QuestChatWrapper.svelte';

let quests;
let quest;

const { pathId, questId } = Astro.params;

quests = await Astro.glob('../json/*/*.json');

console.log("questId", questId);
console.log("pathId", pathId);
console.log("quests", quests);
quest = quests.find((quest) => {
    console.log("quest.default.id", quest.default.id);
    return quest.default.id === `${pathId}/${questId}`;
});
console.log("quest", quest);
---

<Page>
    <QuestChatWrapper quests={quests} quest={quest} client:load />
</Page>